c:/ZH099/pkg/systems/classes/include/classes.inc, Line 26
var settings := Classes_GetSettingsCfgElem( "Settings" );
0: decl global #0
1: "Settings"
2: 0L
3: makelocal
4: jmp userfunc @54
5: :=
6: #
c:/ZH099/pkg/utils/datafile/include/datafile.inc, Line 35
var DF_DEBUG_MODE	:= 0;
7: decl global #1
8: 0L
9: :=
10: #
C:\ZH099\pkg\systems\brainAI\scripts\itemGiven\totem.src, Line 15
program BrainNerve( params )
const LEVEL_MULTIPLIER := 1500;
11: get arg 'params'
var npc		:= params[1];
12: decl local #1
13: local #0
14: 1L
15: [] 1
16: :=
17: #
var event	:= params[3];
18: decl local #2
19: local #0
20: 3L
21: [] 1
22: :=
23: #
params := 0; // Not needed anymore.
24: 0L
25: local0 := 
while( npc )
26: local #1
27: if false goto 50
if( event )
28: local #2
29: if false goto 43
case( event.type )
30: local #2
31: get member 'type'
32: casejmp
	1024: @33
	default: @40
ItemGivenEvent( npc, event );
33: local #1
34: local #2
35: makelocal
36: jmp userfunc @98
37: #
break;
38: goto39
39: goto41
break;
40: goto41
event := 0;
41: 0L
42: local2 := 
SleepMS(5);
43: 5L
44: Func(3,2): Sleepms
45: #
event := Wait_For_Event(1);
46: 1L
47: Func(3,7): Wait_For_Event
48: local2 := 
49: goto26
return 1;
50: 1L
51: progend
52: leave block(3)
53: progend
c:/ZH099/pkg/systems/classes/include/settings.inc, Line 20
function Classes_GetSettingsCfgElem( elem_name, byref cfg_file:=0 )
54: pop param byref 'cfg_file'
55: pop param 'elem_name'
if( !cfg_file )
56: local #0
57: if true goto 61
cfg_file := Classes_GetSettingsCfgFile();
58: makelocal
59: jmp userfunc @82
60: local0 := 
var elem := cfg_file[elem_name];
61: decl local #2
62: local #0
63: local #1
64: [] 1
65: :=
66: #
if( elem.errortext )
67: local #2
68: get member 'errortext'
69: if false goto 80
SysLog( "Error::Classes_GetSettingsCfgElem() - Unable to find elem ["+elem_name
70: "Error::Classes_GetSettingsCfgElem() - Unable to find elem ["
71: local #1
72: +
73: "] ->"
74: +
75: local #2
76: get member 'errortext'
77: +
78: Func(3,0): SysLog
79: #
return elem;
80: local #2
81: return
c:/ZH099/pkg/systems/classes/include/settings.inc, Line 12
function Classes_GetSettingsCfgFile()
var cfg := ReadConfigFile( ":classes:settings" );
82: decl local #0
83: ":classes:settings"
84: Func(4,0): ReadConfigFile
85: :=
86: #
if( cfg.errortext )
87: local #0
88: get member 'errortext'
89: if false goto 96
SysLog( "Error::Classes_GetSettingsCfgFile() - Unable to open [:classes:setting
90: "Error::Classes_GetSettingsCfgFile() - Unable to open [:classes:settings.cfg] ->"
91: local #0
92: get member 'errortext'
93: +
94: Func(3,0): SysLog
95: #
return cfg;
96: local #0
97: return
C:\ZH099\pkg\systems\brainAI\scripts\itemGiven\totem.src, Line 44
function ItemGivenEvent( npc, byref event )
98: pop param byref 'event'
99: pop param 'npc'
var item := event.item;
100: decl local #2
101: local #0
102: get member 'item'
103: :=
104: #
var source := event.source;
105: decl local #3
106: local #0
107: get member 'source'
108: :=
109: #
ReleaseItem( item );
110: local #2
111: Func(2,17): ReleaseItem
112: #
if( source.hidden )
113: local #3
114: get member id 'hidden' (32)
115: if false goto 119
return 1;
116: 1L
117: return
118: goto150
elseif( source.frozen || source.paralyzed )
119: local #3
120: get member id 'frozen' (34)
121: local #3
122: get member id 'paralyzed' (35)
123: ||
124: if false goto 128
return 1;
125: 1L
126: return
127: goto150
elseif( source.IsA( POLCLASS_NPC ))
128: local #3
129: 4L
130: Call Method id isa (#0, 1 params)
131: if false goto 135
return 1;
132: 1L
133: return
134: goto150
elseif( IsTotem( npc ) )
135: local #1
136: makelocal
137: jmp userfunc @173
138: if false goto 142
return 1;
139: 1L
140: return
141: goto150
elseif( Totem_GetLevel( npc ) < 7 )
142: local #1
143: makelocal
144: jmp userfunc @159
145: 7L
146: <
147: if false goto 150
return 1;
148: 1L
149: return
MoveItemToContainer( item, npc.backpack );
150: local #2
151: local #1
152: get member id 'backpack' (41)
153: -1L
154: -1L
155: Func(2,8): MoveItemToContainer
156: #
return 0;
157: 0L
158: return
c:/ZH099/pkg/items/totem/include/totem.inc, Line 39
function Totem_GetLevel( npc )
159: pop param 'npc'
var level := CInt( GetObjProperty( npc, "TotemLevel" ));
160: decl local #1
161: local #0
162: "TotemLevel"
163: Func(2,2): GetObjProperty
164: Func(0,2): CInt
165: :=
166: #
if( !level )
167: local #1
168: if true goto 171
level := 0;
169: 0L
170: local1 := 
return level;
171: local #1
172: return
c:/ZH099/pkg/items/totem/include/totem.inc, Line 14
function IsTotem( npc )
173: pop param 'npc'
var totem := GetObjProperty( npc, "IsTotem" );
174: decl local #1
175: local #0
176: "IsTotem"
177: Func(2,2): GetObjProperty
178: :=
179: #
if( !totem )
180: local #1
181: if true goto 184
return 0;
182: 0L
183: return
return 1;
184: 1L
185: return
