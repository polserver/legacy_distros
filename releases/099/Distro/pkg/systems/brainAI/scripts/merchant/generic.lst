C:\ZH099\pkg\systems\brainAI\scripts\merchant\generic.src, Line 13
program BrainNerve( params )
include ":brainAI:eventid";
0: get arg 'params'
var npc		:= params[1];
1: decl local #1
2: local #0
3: 1L
4: [] 1
5: :=
6: #
var event	:= params[3];
7: decl local #2
8: local #0
9: 3L
10: [] 1
11: :=
12: #
params := 0; // Not needed anymore.
13: 0L
14: local0 := 
while( npc )
15: local #1
16: if false goto 46
if( event )
17: local #2
18: if false goto 39
case( event.type )
19: local #2
20: get member 'type'
21: casejmp
	512: @22
	256: @29
	default: @36
SoldEvent( npc, event );
22: local #1
23: local #2
24: makelocal
25: jmp userfunc @67
26: #
break;
27: goto28
28: goto37
BoughtEvent( npc, event );
29: local #1
30: local #2
31: makelocal
32: jmp userfunc @50
33: #
break;
34: goto35
35: goto37
break;
36: goto37
event := 0;
37: 0L
38: local2 := 
SleepMS(5);
39: 5L
40: Func(3,2): Sleepms
41: #
event := Wait_For_Event(1);
42: 1L
43: Func(3,6): Wait_For_Event
44: local2 := 
45: goto15
return 1;
46: 1L
47: progend
48: leave block(3)
49: progend
C:\ZH099\pkg\systems\brainAI\scripts\merchant\generic.src, Line 52
function BoughtEvent( npc, byref event )
50: pop param byref 'event'
51: pop param 'npc'
PrintTextAbovePrivate(npc, "The total of thy sell is " + event.amount, event.so
52: local #1
53: "The total of thy sell is "
54: local #0
55: get member id 'amount' (13)
56: +
57: local #0
58: get member 'source'
59: 3L
60: local #1
61: get member id 'speech_color' (66)
62: 0L
63: Func(2,5): PrintTextAbovePrivate
64: #
return 1;
65: 1L
66: return
C:\ZH099\pkg\systems\brainAI\scripts\merchant\generic.src, Line 45
function SoldEvent( npc, byref event )
67: pop param byref 'event'
68: pop param 'npc'
PrintTextAbovePrivate(npc, "The total of thy purchase is " + event.amount, even
69: local #1
70: "The total of thy purchase is "
71: local #0
72: get member id 'amount' (13)
73: +
74: local #0
75: get member 'source'
76: 3L
77: local #1
78: get member id 'speech_color' (66)
79: 0L
80: Func(2,5): PrintTextAbovePrivate
81: #
return 1;
82: 1L
83: return
